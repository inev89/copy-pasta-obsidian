
 Security  Token  Service  (STS)  enables you to request temporary, limited-privilege credentials for users. This guide provides  descriptions of the STS API. For more information about using this service, see Temporary   Security   Credentials   <https://docs.aws.amazon.com/IAM/lat-est/UserGuide/id_credentials_temp.html>

# Get-Caller-Identity

The `GetCallerIdentity` action in AWS is part of the Security Token Service (STS) and allows users to retrieve details about the IAM identity whose credentials are used to make the API request. It can be considered a bit like the `whoami` command for Windows and Linux. The command returns the globally unique ARN, and, if applicable, the assumed IAM role's ARN. While this is a commonly used command, it is also used by malicious actors to determine the principal (IAM user or role) associated with compromised credentials, as part of gaining situational awareness..

```
aws sts get-caller-identity
```

# AssumeRole

The `AssumeRole` operation in AWS is part STS. It allows an AWS identity to assume a different privilege context for a limited period, and potentially access other resources that the assuming principal wouldn't normally have access to.

```
aws sts assume-role --role-arn arn:aws:iam::12345689012:role/AdminRole --role-session-name MySession --profile pwnedlabs
```

## Add New Profile and Session Token

Configure new profile with the new keys
```bash
aws configure --profile admin-pwnedlabs
AWS Access Key ID [None]: 
AWS Secret Access Key [None]: 
Default region name [None]: 
Default output format [None]: 

```

Set session token

```bash
aws configure set aws_session_token "" --profile admin-pwnedlabs
```